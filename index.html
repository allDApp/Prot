<!DOCTYPE html>
<!-- saved from url=(0041)http://tongzhao.red/dapp/prot/index.html# -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>星云Endanger</title>

  <!-- Bootstrap core CSS -->
  <link href="./js/bootstrap_4.1.1_css_bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/mscc-0.3.6.min.css">
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/jquery.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>
  <script src="./js/index.js"></script>
  <!-- Custom styles for this template -->
  <style>
    :root {
      --jumbotron-padding-y: 3rem;
    }

    .jumbotron {
      padding-top: var(--jumbotron-padding-y);
      padding-bottom: var(--jumbotron-padding-y);
      margin-bottom: 0;
      background-color: #fff;
    }

    @media (min-width: 768px) {
      .jumbotron {
        padding-top: calc(var(--jumbotron-padding-y) * 2);
        padding-bottom: calc(var(--jumbotron-padding-y) * 2);
      }
    }

    .jumbotron p:last-child {
      margin-bottom: 0;
    }

    .jumbotron-heading {
      font-weight: 300;
    }

    .jumbotron .container {
      max-width: 40rem;
    }

    footer {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    footer p {
      margin-bottom: .25rem;
    }

    .box-shadow {
      box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);
    }
  </style>
</head>

<body>

  <header>
    <div class="bg-dark collapse show" id="navbarHeader">
      <div class="container">
        <div class="row">
          <div class="col-sm-8 col-md-7 py-4">
            <h4 class="text-white">关于</h4>
            <p class="text-muted">
              必备插件:
              <a target="_blank" href="https://github.com/ChengOrangeJu/WebExtensionWallet">https://github.com/ChengOrangeJu/WebExtensionWallet</a>
              <br> 模板来自:
              <a target="_blank" href="https://getbootstrap.com/docs/4.1/examples/album/">https://getbootstrap.com/docs/4.1/examples/album/</a>
              <br>
              <a class="value-prop" id="allrr" href="javascript:void(0)">刷新</a>
            </p>
          </div>
          <div class="col-sm-4 offset-md-1 py-4">
            <h4 class="text-white">星云链</h4>
            <ul class="list-unstyled">
              <li>
                <a href="https://nebulas.io/" class="text-white">官网</a>
              </li>
              <li>
                <a href="https://incentive.nebulas.io/cn/signup.html?invite=YUlzJ" class="text-white">激励计划</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="navbar navbar-dark bg-dark box-shadow">
      <div class="container d-flex justify-content-between">
        <a href="http://tongzhao.red/dapp/prot/index.html#" class="navbar-brand d-flex align-items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" class="mr-2">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
            <circle cx="12" cy="13" r="4"></circle>
          </svg>
          <strong>Endanger</strong>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader"
          aria-expanded="true" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </div>
  </header>

  <main role="main">

    <section class="jumbotron text-center">
      <div class="container">
        <h1 class="jumbotron-heading">星云Endanger
          <br>濒危与保护动物数据库</h1>
        <p class="lead text-muted"></p>
        <p>中文名 拉丁名 英文名</p>
        <textarea class="form-control" rows="1" id="name"></textarea>
        <p>详细资料</p>
        <textarea class="form-control" rows="3" id="content"></textarea>
        <p>提交保证金</p>
        <div class="input-group">
          <textarea class="form-control" rows="1" id="bals">0.001</textarea>
          <button type="button" class="btn btn-primary" id="savebutton" onclick="save();">上传到数据库</button>

        </div>

        <div class="value-props">
          <div class="container">
              <div class="row">
                  
                  
              </div>
          </div>
        </div>
        <div class="progress" style="display: none" id="prot_progress">
          <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
        <div class="container" id="prot_result">

        </div>
        <p></p>
      </div>
    </section>
    <div class="album py-5 bg-light">
      <div class="container">
        <div class="row" id="searchresult">
        </div>
      </div>
    </div>

  </main>

  <footer class="text-muted">
    <div class="container">
      <p>Powered by © Bootstrap4.1</p>
    </div>
  </footer>

  <script src="./js/jquery_3.3.1_jquery.min.js"></script>
  <!-- <script src="https://cdn.bootcss.com/popper.js/1.14.3/popper.min.js"></script> -->
  <script src="./js/bootstrap_4.1.1_js_bootstrap.min.js"></script>
  <script src="./js/blockies.min.js"></script>
  <script>
    if (typeof (webExtensionWallet) === "undefined") {
      alert("https://github.com/ChengOrangeJu/WebExtensionWallet  is not installed, please install it first.")
    }

    function getTemplate(prot, author) {
      prot = prot.replace(/([,.，。])/g, "<br/>");
      return '<div class="col-md-4"><div class="card mb-4 box-shadow"><div class="card-body"><p class="card-text text-center">' +
        prot +
        '</p><div class="d-flex justify-content-between align-items-center"><small class="text-muted" data-toggle="popover" data-content="' +
        author + '"></small></div></div></div></div>';
    }
  </script>
  </script>
  <script src="./js/learn.js" type="text/javascript"></script>
  <script src="./js/nebPay.js"></script>
  <script>
    "use strict";
    var dappAddress = "n1esk5zeMDrDrdM2vizqPMTCjAH8m3uaXFn";
    var NebPay = require("nebpay");
    var nebPay = new NebPay();
    $("#prot_result").on("click", "#btn_prot_dapp", function () {
      var NebPay = require("nebpay"); //https://github.com/nebulasio/nebPay
      var nebpay = new NebPay();
      var content = $("#content").val();
      var name = $("#name").val();
      if (content == "") {
        alert("请输入描述/代码公开情况。");
        return;
      }
      if (name == "") {
        alert("请输入Dapp名。");
        return;
      }
      content = content.replace(/\n/g, "<br>");
      name = name.replace(/\n/g, "<br>");
      var to = dappAddress;
      var value = bal;
      var callFunction = "savedapp";
      var callArgs = "[\"" + name + '","' + content + "\"]";
      nebpay.call(to, value, callFunction, callArgs, {
        listener: function Push(resp) {
          console.log("response of push: " + JSON.stringify(resp))
          var respString = JSON.stringify(resp);
          if (respString.search("rejected by user") !== -1) {
            alert("关闭交易,取消上传你的Dapp信息")
          } else if (respString.search("txhash") !== -1) {
            alert("上传Hash: " + resp.txhash + "请等待交易确认,如果上传失败请检查内容是否含有特殊字符")
          }
        }
      });
    });
  </script>


</body>

</html>